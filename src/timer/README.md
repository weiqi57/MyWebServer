# 使用定时器处理非活跃连接

在服务器主循环中，为每一个连接创建一个定时器进行定时，并使用升序链表存储所有定时器，使用alarm函数定时发送SIGALRM信号，信号处理函数通过管道通知主循环，主循环函数通过epoll处理信号后，对升序链表的所有定时器进行处理

## 相关技术
* 为避免信号处理函数执行时间过长，缩短异步执行时间，减少对主程序的影响，信号处理函数仅仅发送信号通知主循环，将信号对应的处理逻辑放在程序主循环中

    信号处理函数和主循环通过**管道**进行通信，信号处理函数往管道的写端写入信号值，主循环则从管道的读端读出信号值

* 统一事件源，使用epoll I/O复用系统调用来监听管道读端的可读事件，将定时器的信号事件与其他文件描述符统一处理

* 自定义带头尾结点的双向链表实现定时器容器
